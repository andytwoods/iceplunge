{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% translate "My Plunges" %} – Cold Cognition Project{% endblock title %}

{% block content %}
<div class="columns is-variable is-6">

  {# ── Log form ──────────────────────────────────────────────────────────── #}
  <div class="column is-5">
    <div class="box">
      <h2 class="title is-5 mb-4">{% translate "Log a plunge" %}</h2>
      {% include "plunges/partials/_plunge_form.html" %}
    </div>

  </div>

  {# ── History ───────────────────────────────────────────────────────────── #}
  <div class="column">
    <h2 class="title is-5 mb-4">{% translate "My plunge history" %}</h2>

    {% if plunges %}
      <div class="table-container">
        <table class="table is-fullwidth is-hoverable">
          <thead>
            <tr>
              <th>{% translate "When" %}</th>
              <th>{% translate "Setting" %}</th>
              <th>{% translate "Duration" %}</th>
              <th>{% translate "Depth" %}</th>
              <th>{% translate "Temp" %}</th>
              <th>{% translate "Perseverance" %}</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="plunge-list-body">
            {% for plunge in plunges %}
              {% include "plunges/partials/_plunge_row.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>

      {% if is_paginated %}
        <nav class="pagination is-small" role="navigation" aria-label="pagination">
          {% if page_obj.has_previous %}
            <a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}">{% translate "Previous" %}</a>
          {% endif %}
          {% if page_obj.has_next %}
            <a class="pagination-next" href="?page={{ page_obj.next_page_number }}">{% translate "Next" %}</a>
          {% endif %}
        </nav>
      {% endif %}

    {% else %}
      <div class="has-text-centered py-6 has-text-grey">
        <p class="is-size-5 mb-2">{% translate "No plunges logged yet." %}</p>
        <p class="is-size-7">{% translate "Use the form to record your first one." %}</p>
      </div>
    {% endif %}
  </div>

</div>
{% endblock content %}
